var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("clientinst_xls",["require","exports"],function(n,t){function ar(){function n(n,t){n in i||(i[n]=t)}i=_w[hi]=_w[hi]||{};n(k,2e3);n(ai,1e3);n(vi,5e5);n(yi,1e5);n(pi,500);n(e,!0);n(wi,3)}function di(){yt=0;oi=_G.ST?_G.ST.getTime():0;bt=!1;et={}}function l(n,t,r,u){var s,f,h;i[e]&&(s=(new Date).getTime(),f={errorType:n,failCount:t,ImpressionGuid:r,TS:s,SEQ:yt++},f[o]=y+"LER",gi(f),u?(si++,si>i[wi]&&(f.errorType="Overload",i[e]=!1),h={impressionGuid:r,timestamp:s,data:{eventType:at,eventData:f}},ir([h])):d(at,f,null))}function vr(){ar();di();try{p=_w.localStorage;u.initialize()}catch(n){}}function ti(n){u.append(n);c()}function ii(n){return JSON.stringify(n).replace(/]]>/g,"]]]\]><![CDATA[>")}function r(n,t,i){n.push("<",t,">",i,"<\/",t,">")}function yr(n,t,i){var s,e=n.data,o=e.eventData,h,u,f;o||(o=e.eventData={});t.push("<E>");r(t,"T","Event."+e.eventType);r(t,"IG",o.OvrIG||n[rt]);n[dt]&&(r(t,"PrevIG",n[dt]),n[gt]&&r(t,"DominantIG",n[gt]));h=e.dataSources;h&&r(t,"DS","<![CDATA["+ii(h)+"]\]>");u=e.pageLayout;u&&(t.push("<Page>"),f=!1,"Name"in u&&(r(t,"Name",u.Name),f=!0),"Number"in u&&(r(t,"Num",u.Number),f=!0),"IID"in u&&(r(t,"IID",u.IID),f=!0),"SFX"in u&&(r(t,"SFX",u.SFX),f=!0),f&&(u=(s=u.L)!==null&&s!==void 0?s:[]),r(t,"L","<![CDATA["+ii(u)+"]\]>"),t.push("<\/Page>"));o.UTS=i;r(t,"D","<![CDATA["+ii(o)+"]\]>");r(t,"TS",n[ci]);t.push("<\/E>")}function gi(n){var t=_w.location.href,i;return it&&t.indexOf(it)===0||(i=t.indexOf("?"),i<0&&(i=t.indexOf("#")),it=i<0?t:t.substring(0,i)),n.CurUrl=it,n}function nr(n){var t=["<ClientInstRequest>"],l=(new Date).getTime(),o=_G.CID||sj_cook.get(fi,fi),e,i,s,u,h,f;if(o&&r(t,"CID",o),n.length>0){for(e=n[0].data,e.eventType==vt&&(i=e.pageLayout,i&&i.IID&&i.SFX&&(s=i.IID+"_"+i.SFX,r(t,"AppNS",s))),t.push("<Events>"),u=0;u<n.length;u++)h=n[u],yr(h,t,l);t.push("<\/Events>")}if(t.push("<\/ClientInstRequest>"),f=t.join(""),_G.EnableCompression&&_w.fflate){var a=_w.fflate.strToU8(f),v=_w.fflate.deflateSync(a),c=btoa(String.fromCharCode.apply(String,v));if(c.length<f.length)return w=tr(_G.XLSC),c}return w=tr(_G.XLS),f}function tr(n){var t="?dl=1";return _G.XLSOvr&&(t+="&f="+_G.XLSOvr),n+t}function c(n){if(n===void 0&&(n=!1),i[e]){var t=n?h[b]:h[ut];t[ft]||(t[ft]=setTimeout(function(){return ot(n,!1)},t.getInterval()))}}function ot(n,t,r){var o,d,a,v,y,p,s;if(i[e]&&(o=n?h[b]:h[ut],clearTimeout(o[ft]),o[ft]=null,!n||!h[ut][f])){if(!n&&h[b][f]&&h[b][f].abort(),o[f])if(d=(new Date).getTime()-o[li],d>i[k])o[f].abort(),o[f]=null,l("TimedOut",1,_G.IG);else return;if(a=u.getBatch(n),a.length!=0){if(v=a.map(function(n){return n.log}),y=r&&r.useSendBeacon,y&&st(v,"SB"),p=nr(v),y&&wr(w,p)){o[f]&&t&&(o[f].abort(),o[f]=null);u.clearSentItems(n,!0)&&!n&&c(!1);c(!0);return}s=sj_gx();s.open("POST",w,!0);i[k]>=1e3&&(s.timeout=i[k]);s.onload=function(){return pr(s,o,n)};s.setRequestHeader("Content-type","text/xml");o[f]=s;o[li]=(new Date).getTime();s.send(p)}}}function st(n,t,i){n.forEach(function(n){var r,u;(r=(u=n.data.eventData)[lt])!==null&&r!==void 0?r:u[lt]={};n.data.eventData[lt][t]=i!==null&&i!==void 0?i:"1"})}function pr(n,t,i){if(n.readyState===4){t[f]=null;var r=Math.floor(n.status/100);r===2?(u.clearSentItems(i)&&!i&&c(!1),c(!0)):r===4?(u.markFailedItems(!0,i),c(!0)):u.markFailedItems(!1,i);i&&u.recordRetryAttempt()}}function ri(n,t,i,r,u,f,e,o,s){for(var d,h,a,v,l,y,g,c,p,w,b,k=0,nt=lr;k<nt.length;k++)d=nt[k],_w[pt]&&_w[pt][d]&&_w[pt][d](t);if(h={},gi(h),t)if(typeof t=="string")h.Text=t;else for(a in t)t.hasOwnProperty(a)&&(h[a]=t[a]);if(i&&(ki.indexOf(i)>=0?h.T=i:(i.substring(0,3)==="CI."&&(i=i.substring(3)),h.T="CI."+i)),v=s||(new Date).getTime(),h.TS=v,h.RTS=v-oi,h.SEQ=yt++,l=(c={},c[rt]=f||h.ImpressionGuid||_G.IG,c[dt]=e,c[ci]=v,c.data={eventType:n||tt,eventData:h,dataSources:r,pageLayout:u},c[gt]=o,c),_G.XLSThrottle&&bi.indexOf(h.T)===-1){if(y=[l[rt],n!==null&&n!==void 0?n:tt,(p=h.T)!==null&&p!==void 0?p:"",(w=h.FID)!==null&&w!==void 0?w:"",(b=h.Name)!==null&&b!==void 0?b:""].join(","),ni.hasOwnProperty(y)||(ni[y]=0),g=++ni[y],g>_G.XLSThrottle)return null;g===_G.XLSThrottle&&st([l],"TT")}return h.T==="CI.Click"||n===vt?(ir([l]),null):l}function ir(n){var i=nr(n),t=sj_gx();t.open("POST",w);t.setRequestHeader("Content-type","text/xml");t.send(i)}function rr(n,t){var r=[];for(var i in n)n.hasOwnProperty(i)&&(typeof n[i]=="string"&&(n[i]=decodeURIComponent(n[i])),r.push(i,n[i]));a(n.T,n.FID,n.Name,t,r,"DL")}function ui(n,t){(new Image).src=_G.lsUrl+"&dl=2&Type=Event.ClientInst&DATA="+n;a("Info","XLS","DLFallback",!1,["DATA",n,"SRC",t],"DLF")}function ur(n,t,i){var r,u,f,e;if(_G.DirectLogFlight!=null&&t<=_G.DirectLogFlight)try{r=null;try{r=JSON.parse(n)}catch(o){r=JSON.parse(decodeURIComponent(n).replace(/[\u0000-\u001F]+/g,""))}if(Array.isArray(r))for(u=0,f=r;u<f.length;u++)e=f[u],rr(e,i);else r!==null&&typeof r=="object"?rr(r,i):ui(n,"Else JSON Parse")}catch(o){ui(n,"DLErr -"+o.message)}else ui(n,"Else Flight Group")}function d(n,t,r,u,f,s,h,c,l){var a,v;i[e]&&(t!==null&&t!==void 0?t:t={},t[o]=(a=t[o])!==null&&a!==void 0?a:y+"LE",v=ri(n,t,r,u,f,s,h,c,l),v)&&ti(v)}function fr(n){var t,i=[];n.forEach(function(n){et.hasOwnProperty(n)||(et[n]=1,i.push(n))});i.length>0&&d(ei,(t={queryTags:i.join(",")},t[o]="F",t),ei)}function er(n,t,r,u,f,s){var h,l,c;if(i[e]){if(!n||!t||!r||!u)return console.error("LogCustomData: Missing one or more required identifier fields in data object");(l=__assign((h={T:n,FID:t,Name:r,Namespace:u,CustomDataKeys:Object.keys(f).join(",")},h[o]=y+"CD",h),f),c=ri(tt,l,n,null,null,s),c)&&ti(c)}}function wr(n,t){var i="sendBeacon",r=!1;if(navigator&&navigator[i])try{r=navigator[i](n,t)}catch(u){l("SBFail",1,_G.IG)}return r}function hr(n,t){n===void 0&&(n=!0);!_G.XLSNoFlush&&t&&t.useSendBeacon&&(u.dumpToStorage(),ot(!1,!0,t))}function ht(){u.dumpToStorage();ot(!1,!1)}function ct(){u.dumpToStorage();wt=!0;ot(!1,!0,{useSendBeacon:!0})}function cr(n,t,i){n!==null&&n!==void 0?n:n={};n[o]=y+"LP";d(vt,n,"ClientSidePartialImpression",t,i)}var nt,et,ki,u,h,or,sr,a,v,g;t.__esModule=!0;t.LogPartialImpression=t.FlushMainQueueDontForce=t.ForceFlush=t.Log2=t.Log=t.LogCustomData=t.LogFilterFlare=t.LogEvent=t.DirectLog=void 0;var y="XLS-",o="SDK",lt="XLSF",fi="MUID",at="CIQueueError",vt="PartialDynamicContent.FrontDoor",tt="ClientInst",ei="FilterFlare",i,yt,oi,p,it,si=0,w=_G.XLS,hi="ClientInstConfig",pt="XLS_PreProcessor",lr=["ChatPrivacy"],wt=!1,bt=!1,s="inProgress",kt="retried",rt="impressionGuid",dt="previousImpressionGuid",gt="dominantImpressionGuid",ci="timestamp",f="currentRequest",li="requestSentTimestamp",ut="mainQueue",b="retryQueue",ft="flushTimeoutHandle",k="flushInterval",ai="retryInterval",vi="maxStorageUse",yi="maxBatchSize",pi="queueDumpInterval",e="isInstrumentationEnabled",wi="maxDirectErrors",ni={},bi=["CI.Click","CI.BoxModel","CI.FilterFlare","CI.Scroll","CI.Hover"];_G.XLSThrotHover&&(bi=["CI.Click","CI.BoxModel","CI.FilterFlare","CI.Scroll"]);et={};ki=["IsCI","VDPChapterTimestampClick"],function(n){function w(n){var t=["proactive","search","zinc"].some(function(t){return n.indexOf(t)==1});return"eventLogQueue"+(t?"_Online":"_Offline")}function v(){return f&&i[e]}function u(){var n,t;if(v()){n=tt();try{t=h;p[t]=n}catch(i){if(i.name.toLowerCase().indexOf("quota")>=0)f=!1;else throw i;}}}function a(){v()&&(o&&clearTimeout(o),o=setTimeout(u,i[pi]))}function b(){var n,e,i,u,r;if(p){if(n=p[h],t=[],typeof n=="string"||n&&n.length!==0)try{if(t=JSON.parse(n),t.some(function(n){return!n.log}))l("LSItemErr",t.length,_G.IG),t=[];else if(e=t.length,e>0){for(i=0,u=t;i<u.length;i++)r=u[i],st([r.log],"RE",r[s]?"IP":"NS"),r[s]=!1;c()}}catch(o){l("LSErr",0,_G.IG)}p[h]="[]";f=!0}}function k(n){var h=[],e=n?r[0]:t,o,c,f,u;if(e)for(o=0,c=e.length,f=0;f<c;f++)if(u=e[f],n||!u[kt])if(o+=u.size,o<=i[yi])u[s]=!0,h.push(u);else break;return h}function d(n,i){return i===void 0&&(i=!1),t=t.filter(function(t){return!t[s]&&(!n||t[kt])}),i?u():a(),t.length>0}function g(n,i){for(var f=[],h=i?r[0]:t,e=0,u,o,c;e<h.length;)if(u=h[e],u[s])if(st([u.log],"retry",n?"BR":"RE"),n){if(h.splice(e,1),u.log.data&&u.log.data.eventType===at)continue;u[kt]=!0;f.push(u)}else u[s]=!1,e++;else e++;o=f.length;o==1?l("LogDrop",1,f[0].log[rt]):o>0&&(c=o/2,r.push(f.slice(0,c)),r.push(f.slice(c)));a()}function nt(){var n,t,i;if(r.length>0){for(n=r[0],t=0;t<n.length;)i=n[t],i[s]?n.splice(t,1):t++;n.length==0&&r.shift()}}function tt(){var e=JSON.stringify(t),u=e.length-i[vi],o=t.length,r,n,f;if(u>0)for(r=0,n=0;n<o;n++)if(f=t[n].size,r+=f+1,r>=u){t.splice(0,n+1);l("QueueTrim",n+1,_G.IG,!0);break}return JSON.stringify(t)}function it(n){var i,r=(i={log:n,retried:!1},i[s]=!1,i.size=0,i),f=JSON.stringify(r).length+3;r.size=f;t.push(r);wt?u():a()}var t=[],f=!1,o=null,r=[],y=_w.location.pathname,h=w(y);n.dumpToStorage=u;n.initialize=b;n.getBatch=k;n.clearSentItems=d;n.markFailedItems=g;n.recordRetryAttempt=nt;n.append=it}(u||(u={}));h=(nt={},nt[ut]={getInterval:function(){return i[k]}},nt[b]={getInterval:function(){return i[ai]}},nt);t.DirectLog=ur;t.LogEvent=d;t.LogFilterFlare=fr;t.LogCustomData=er;or=function(n,t,i,r){for(var f=[],u=4;u<arguments.length;u++)f[u-4]=arguments[u];a(n,t,i,r,f,"L")};t.Log=or;sr=function(n,t,i,r,u,f,e){var o=Object.keys(e).reduce(function(n,t){return __spreadArray(__spreadArray([],n,!0),[t,e[t]],!1)},[]);i&&o.push("Service",i);r&&o.push("Scenario",r);u&&o.push("AppNS",u);f&&o.push("K",f);a(n,null,t,!1,o,"L2")};t.Log2=sr;a=function(n,t,r,u,f,s){var l,h,c,v,w,p;if(i[e]){if(bt||(bt=!0,a("Init","CI","Base",!1,[],"L")),h={},f&&f.length>0&&f.length%2==0)for(c=0;c<f.length;c+=2)(v=f[c],w=f[c+1],v)&&(h[v]=w);(l=h[o])!==null&&l!==void 0?l:h[o]=y+(s!==null&&s!==void 0?s:"");h.hasOwnProperty("K")||typeof t!="number"||(h.K=t);h.Name=r||"";h.FID=typeof t!="number"?t||"VoidFID":"KFID";p=ri(tt,h,n);p&&ti(p)}};t.ForceFlush=hr;t.FlushMainQueueDontForce=ht;t.LogPartialImpression=cr;vr();_w.Log={Log:t.Log,LogFilterFlare:fr,DirectLog:ur,LogCustomData:er};_w.Log2={LogEvent:d,ForceFlush:hr,FlushMainQueueDontForce:ht};_w.sj_log2=t.Log2;_w.cspi_log=cr;v="sj_evt";g="sj_be";_w[v]&&(_w[v].bind("onP1",ht,!0),_w[v].bind("ajax.postload",ht,!0),_w[v].bind("ajax.unload",di),_w[v].bind("unload",ct));_w[g]&&(_w[g](_w,"beforeunload",ct),_w[g](_w,"pagehide",ct),_w[g](_d,"visibilitychange",function(){_d.visibilityState==="hidden"?ct():wt=!1}))})